import{defineIndex}from"./utils.js";import{getParentElement}from"./rendering.js";let pagination,sliderBlock=null,slider=null,sliderCount=0,buttonsList=null,buttonPrevios=null,buttonNext=null,slideButtons=null,paginationBlock=null,durationTime=18e3;function isCountEqual(t,n){return t===n+1}function getCustomSlide(t){slider.style.transform=`translateX(-${100*(t-1)}%)`,pagination.counter=t-1,pagination.assignCurrent(t)}function getNextSlide(){isCountEqual(sliderCount,pagination.counter)?(slider.style.transform="translateX(0%)",pagination.counter=0):(pagination.counter++,slider.style.transform=`translateX(-${100*pagination.counter}%)`),pagination.assignCurrent(pagination.counter+1)}function getPreviosSlide(){0===pagination.counter?(slider.style.transform=`translateX(-${100*(sliderCount-1)}%)`,pagination.counter=sliderCount-1):(pagination.counter--,slider.style.transform=`translateX(-${100*pagination.counter}%)`),pagination.assignCurrent(pagination.counter+1)}function getSlideButtons(){slideButtons.forEach((function(t){t.classList.toggle("buttons-list__slide--hide")}))}function getStartSlider(){try{if(sliderBlock=document.querySelector(".micflag__slider"),!sliderBlock)throw new Error("слайдер отсутствует");sliderBlock&&(slider=sliderBlock.querySelector(".slider"),sliderCount=slider.children.length,sliderCount>=2&&(buttonsList=document.querySelector(".buttons-list"),buttonPrevios=buttonsList.children[0],buttonNext=buttonsList.children[buttonsList.children.length-1],slideButtons=document.querySelectorAll(".buttons-list__slide"),paginationBlock=setPagination(),buttonPrevios.after(paginationBlock),pagination=setCurrentPagination(),pagination.defineCurrent(),getSlideButtons(),window.setInterval(getNextSlide,durationTime),buttonPrevios.addEventListener("click",getPreviosSlide),buttonNext.addEventListener("click",getNextSlide),paginationBlock.addEventListener("click",onCustomSlide)))}catch(t){}}function setPagination(){let t=document.createElement("div");t.classList.add("buttons-list__wrapper");for(let n=0;n<sliderCount;n++){let e=document.createElement("button");e.classList.add("buttons-list__item"),0===n&&e.classList.add("buttons-list__item--current"),t.appendChild(e)}return t}function setCurrentPagination(){const t=Array.from(document.querySelector(".buttons-list__wrapper").querySelectorAll(".buttons-list__item"));let n=null;return{defineCurrent:function(){for(let e=0;e<t.length;e++)if(t[e].classList.contains("buttons-list__item--current")){n=t[e];break}},getCurrent:function(){return n},setCurrent:function(e){n=t[e-1]},assignCurrent:function(t){n.classList.toggle("buttons-list__item--current"),this.setCurrent(t),n.classList.toggle("buttons-list__item--current")},counter:0}}function onCustomSlide(t){if(!t.target.classList.contains("buttons-list__item--current")&&t.target.classList.contains("buttons-list__item")){getCustomSlide(defineIndex(t.target))}}getStartSlider();export{sliderBlock};